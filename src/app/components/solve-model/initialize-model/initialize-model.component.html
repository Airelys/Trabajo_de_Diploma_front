<div class="container">

    <form [formGroup]="form" #initialize_model="ngForm" >

        <table class="table table-sm">
            <tr>
                <td><h4>Parametros</h4></td>
                <td><h4>Valores Iniciales</h4></td>
                <td><h4>Seleccionar Parametros</h4></td>
                <td *ngIf="bounds"><h4>Valores minimos</h4></td>
                <td *ngIf="bounds"><h4>Valores maximos</h4></td>
            </tr>
            <tr>
                <td>&beta;</td>
                <td><input type="number" (change)="updateParamsInitials(0,beta_value.value)"  #beta_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(0,beta_est.value)"  #beta_est /></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(0,beta_min.value)"  #beta_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(0,beta_max.value)"  #beta_max required/></td>
            </tr>
            <tr *ngIf="model_name.model_name!='SI'">
                <td>&gamma;</td>
                <td><input type="number" (change)="updateParamsInitials(1,gamma_value.value)"  #gamma_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(1,gamma_est.value)"  #gamma_est /></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(1,gamma_min.value)"  #gamma_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(1,gamma_max.value)"  #gamma_max required/></td>
            </tr>
            <tr *ngIf="model_name.model_name=='SIRS'">
                <td>&delta;</td>
                <td><input type="number" (change)="updateParamsInitials(2,delta_value.value)"  #delta_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(2,delta_est.value)"  #delta_est/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(2,delta_min.value)"  #delta_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(2,delta_max.value)"  #delta_max required/></td>
            </tr>
            <tr *ngIf="model_name.model_name=='SEIR'">
                <td>e</td>
                <td><input type="number" (change)="updateParamsInitials(3,e_value.value)"  #e_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(3,e_est.value)"  #e_est/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(3,e_min.value)"  #e_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(3,e_max.value)"  #e_max required/></td>
            </tr>
            <tr>
                <td>&lambda;</td>
                <td><input type="number" (change)="updateParamsInitials(4,lambda_value.value)"  #lambda_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(4,lambda_est.value)"  #lambda_est /></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(4,lambda_min.value)"  #lambda_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(4,lambda_max.value)"  #lambda_max required/></td>
            </tr>
            <tr>
                <td>&mu;</td>
                <td><input type="number" (change)="updateParamsInitials(5,mu_value.value)"  #mu_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(5,mu_est.value)"  #mu_est/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(5,mu_min.value)"  #mu_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(5,mu_max.value)"  #mu_max required/></td>
            </tr>
            <tr>
                <td>m</td>
                <td><input type="number" (change)="updateParamsInitials(6,m_value.value)"  #m_value required/></td>
                <td><input type="checkbox" (change)="updateParamsEstInitials(6,m_est.value)"  #m_est/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMinInitials(6,m_min.value)"  #m_min required/></td>
                <td *ngIf="bounds"><input type="number" (change)="updateParamsMaxInitials(6,m_max.value)"  #m_max required/></td>
            </tr>
        </table>

        <h3>Define valores iniciales para las variables</h3>
        <table class="table table-sm">
            <tr>
                <td><h4>S</h4></td>
                <td><h4>I</h4></td>
                <td *ngIf="model_name.model_name!='SI'"><h4>R</h4></td>
                <td *ngIf="model_name.model_name=='SEIR'"><h4>E</h4></td>
            </tr>
            <tr>
                <td><input type="number" (change)="updateVarsInitials(0,s_value.value)"  #s_value required/></td>
                <td><input type="number" (change)="updateVarsInitials(1,i_value.value)"  #i_value required/></td>
                <td *ngIf="model_name.model_name!='SI'"><input type="number" (change)="updateVarsInitials(2,r_value.value)"  #r_value required/></td>
                <td *ngIf="model_name.model_name=='SEIR'"><input type="number" (change)="updateVarsInitials(3,ee_value.value)"  #ee_value required/></td>
            </tr>
        </table>

        <h4>Selecciona un metodo numerico</h4>
        <mat-form-field class="form_element">
            <mat-select  formControlName="method" required>
                <mat-option *ngFor="let m of methods" [value]="m.name" >{{m.name}}</mat-option>
            </mat-select>
        </mat-form-field>
        <h4>Valor para t</h4>
        <input type="number" formControlName="t" required/>
        <h4>Total de puntos</h4>
        <input type="number" formControlName="total_points" required/>
        <h4>Si desea adimensionalizar inserte un valor de N</h4>
        <input type="number" formControlName="N"/>
    </form>
</div>

<div *ngIf="!estimation">
  <button mat-raised-button type="submit" [disabled]="!initialize_model.form.valid"  (click)="onSubmit()">Resolver numericamente</button>
  <button (click)="updateEstimation()" >Estimar parametros</button>
  <button (click)="updateInterval()" >Analizar Intervalos</button>
</div>
